(this["webpackJsonpadex-staking-ui"]=this["webpackJsonpadex-staking-ui"]||[]).push([[0],{110:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},357:function(e,t,n){e.exports=n.p+"static/media/walletconnect-logo.37f2bc6e.svg"},358:function(e,t,n){e.exports=n.p+"static/media/metamask-fox.c879a582.svg"},359:function(e,t,n){e.exports=n.p+"static/media/trezor.97e30ed8.svg"},360:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8dICgMERx7fIAZHCUsLzfExMUAAAze3+A0Nj0AAADk5OUSFh8XGyMpLDTKysv19fXq6+vW1tdhYmZzdXmur7FBQ0oAAAanqKqGh4sAABMECxcOEh2QkZUgIywVGiVZW1+dn6KPkJNoam63uLo5PEM14Rt4AAADdElEQVR4nO2d25KaQBBAGRYFWfCCiLqjeIv//4txN6msqR1nKizdauWcZ7XnVENDDdgdRQAAAAAAAAAAAAAAAAAAAAAA0AezajK8xvWZavh9JtVMW+2dbDtv2jj9JN+5Plbn6beJ22a+zXT1potmaYvSXFMOXJ98iU0PlIVdNoupnt9qZMsvq0gEDT8s7Wil5Jjt08SxAmnDS4R0r3KsrvLCHV/c0JgiX8kLrm8tWcPQmHgtLVi/3YotWWmueKtlBdc3BZVyeFEUzeLKs14tQxMLnotZ7gmsZmhysYo63burqLZhsZe6Lq5SX1ylSvNOKnScTkeuC/0f9HJokpFMEhfWH1bP0NiFiGHz9V70XoZlIyGYLf1RNQ3NUqKcbv0HqWaluRymWwHDue9SYZRzWMz7F5wFTkNdw7Lpf2OjagNBVQ1NW/VuOAktVdcwnvRuOPTe0BjlSmNS586erKFuDjHEEEMXVBoMMcRQ3vD5K02e+CnGz264G/gZO3cWnsiwIxhiiOH9wRBDDO8PhhhieH8wxBDD+4Mhhhj2yGz9EqB2PVp/IsNsbGM/+euTG/rfaruAIYYYYoghhhhiiCGGGGKIIYYYYoghhhhiiCGGGGKIIYYY/jbs9vywTgPf6kj+MM+AF3Xoa92o+/+nMwAAAAAAAAAAPAavzbhLX4x1G2in0TpbO4eCDXYS+6VFp94mNtASxb64vjYOBEsEdhODO8Id+9PETsNBoA3lXfa8O/YYumEY2mDHEEMMXVBp/s3wEXOIIYb3NzwHTv6nrzRS/bw75lCgF3TkHd+hbijQzzuqNw9kKNGTPToEJgeoGkr01feP0THKlUZkNsI0UExVcygy3yI6ikxh6WRYiMwoiTL/dARNw1hmzkx08q5W0bA8Cw18qnbesHqVJhVK4eWCcXuunGYONye5WZat575GzTBxvgTZE5nn6NEyTErR9kJDezO0luHbQVIwin44psj+QqfSJNKClywObpyLKjksjcKo1ax1V1QNQ2t1Xg0+7FzLljfcbI5aY52rU/v1dBQ2LK2Za77bnR3Pud0UZfntyQFuw+una2VZbGx+Pmq/uz7NDvW+OY8+cd7vB2er5875vs3V756bfX3I9MaO/8Usu8J5p1H5Bt9/4EzN6/UPC2xYAAAAAAAAAAAAAAAAAAAAAAD8p/wEUAVlt99kiIwAAAAASUVORK5CYII="},361:function(e,t,n){e.exports=n.p+"static/media/adex-staking.bf64bad2.svg"},405:function(e,t,n){e.exports=n(802)},410:function(e,t,n){},415:function(e,t){},422:function(e,t){},424:function(e,t){},455:function(e,t){},509:function(e,t){},511:function(e,t){},7:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"o",(function(){return b})),n.d(t,"i",(function(){return m})),n.d(t,"l",(function(){return p})),n.d(t,"j",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return w})),n.d(t,"f",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"h",(function(){return A})),n.d(t,"g",(function(){return E})),n.d(t,"m",(function(){return x})),n.d(t,"k",(function(){return k})),n.d(t,"e",(function(){return O})),n.d(t,"n",(function(){return j}));var a=n(21),r=n(357),o=n.n(r),c=n(358),f=n.n(c),l=n(359),i=n.n(l),s=n(360),u=n.n(s),d="0x4846c6837ec670bbd1f5b485471c8f64ecb9c534",b=Object(a.bigNumberify)(0),m="https://min-api.cryptocompare.com/data/price?fsym=ADX&tsyms=BTC,USD,EUR",p=30,g=null,h="0xADE00C28244d5CE17D72E40330B1c318cD12B7c3",w="0x9fe0d438e3c29c7cff949ad8e8da9403a531cc1a",v=Object(a.bigNumberify)("115792089237316195423570985008687907853269984665640564039457584007913129639935"),y={poolId:"",amount:b},A=[{label:"Validator Tom",id:Object(a.id)("validator:0x2892f6C41E0718eeeDd49D98D648C789668cA67d"),selectable:!0,minStakingAmount:"0.0",rewardPolicy:'The "Validator Tom" pool will distribute its fee earnings proportionally to each staker. The fee earnings will be 7% of the total volume, which you can track on our Explorer. There is an additional incentive reward of 7 million ADX to be distributed by the end of 2020.',slashPolicy:"No slashing.",url:"https://tom.adex.network",estimatedAnnualFeeYield:182500,estimatedAnnualADXYield:15103448.2758,estimatedAnnualADXEarlyYield:12166666.6666},{label:"Validator Jerry",id:Object(a.id)("validator:0xce07CbB7e054514D590a0262C93070D838bFBA2e"),selectable:!1,minStakingAmount:0,rewardPolicy:"",slashPolicy:""}],E="Metamask",x="WalletConnect",k="Trezor",O="Ledger",j=[{title:"Connect with ".concat(E),name:E,icon:f.a},{title:"Connect with ".concat(x),name:x,icon:o.a},{title:"Connect with ".concat(k),name:k,icon:i.a},{title:"Connect with ".concat(O),name:O,icon:u.a}];Object(a.bigNumberify)("100000000000000")},786:function(e,t){},802:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),f=(n(410),n(47)),l=n(8),i=n.n(l),s=n(16),u=n(93),d=n(866),b=n(374),m=n(875),p=n(353),g=n.n(p),h=n(351),w=n.n(h),v=n(352),y=n.n(v),A=n(354),E=n.n(A),x={primary:{main:"#1B75BC",contrastText:"#fff"},accentOne:{main:"#57467B",contrastText:"#fff"},accentTwo:{main:"#7CB4B8",contrastText:"#fff"},grey:{main:"#3f3e3e",contrastText:"#fff"},error:w.a,warning:y.a,first:g.a,contrastThreshold:3,tonalOffset:.2,text:E.a},k=Object(b.a)({typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14},palette:Object(f.a)({},x),overrides:{MuiButton:{root:{borderRadius:0},outlined:{borderRadius:0}},MuiTableCell:{head:{whiteSpace:"nowrap"},root:{whiteSpace:"nowrap"}},MuiPaper:{rounded:{borderRadius:0}},MuiTooltip:{tooltip:{borderRadius:0,fontSize:"0.9em",backgroundColor:"rgba(0,0,0, 0.69)"},arrow:{color:"rgba(0,0,0, 0.69)"}}}}),O=Object(m.a)(k,{options:["xs","sm","md","lg","xl"],factor:3}),j=n(867),C=n(868),S=n(805),B=n(804),D=n(869),T=n(372),I=n.n(T),U=n(373),M=n.n(U),N=n(379),P=n(876),R=n(872),X=n(840),Y=n(376),L=n(356),F=n.n(L),W=n(845),q=n(846),z=n(847),V=n(848),G=n(844),H=n(803),K=n(849),Z=n(877),J=n(850),_=n(7);var Q=n(361),$=n.n(Q),ee=n(27),te=n(21),ne=n(362),ae=n(363),re=n.n(ae),oe=n(167),ce=n(364),fe=n(365),le=n(168),ie=n(366),se=n(110),ue=n(375),de=n(853),be=n(854),me=n(852),pe=n(855),ge=n(856),he=n(857),we=n(858),ve=n(859),ye=n(378),Ae=n(851),Ee=n(96);function xe(e){var t=e.title,n=e.subtitle,a=e.extra,o=e.loaded,c=e.actions,f="string"===typeof a?r.a.createElement(Ee.a,{color:"primary",variant:"h6"},a):a||r.a.createElement(r.a.Fragment,null);return r.a.createElement(ye.a,{elevation:3,style:{height:"100%"}},r.a.createElement("div",{style:{padding:O.spacing(2),minHeight:"85px"}},r.a.createElement(Ee.a,{variant:n.length>16?"h6":"h5"},n),f,r.a.createElement(Ee.a,{color:"textSecondary",variant:"subtitle2"},t),c||r.a.createElement(r.a.Fragment,null)),o?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ae.a,null))}var ke=n(871);function Oe(e){return Object(te.formatUnits)(e,18)}function je(e){return Object(te.formatUnits)(e.div("100000000000000"),4)}function Ce(e){return Object(te.parseUnits)(e,18)}function Se(e,t,n){var a=e&&e.nonce?e.nonce.toNumber():Date.now()/1e3,r=(n||a<1597276800)&&Date.now()<16093728e5,o=6e6/parseFloat(Oe(t),10)*(365/145),c=1e6/parseFloat(Oe(t),10)*(365/30);return o+(r?c:0)}var Be=function(e){return _.h.find((function(t){return t.id===e}))};function De(e){var t=e.owner,n=e.amount,a=e.poolId,r=e.nonce;return Object(te.keccak256)(te.defaultAbiCoder.encode(["address","address","uint","bytes32","uint"],[_.c,t,n,a,r]))}function Te(e){var t=e.stats,n=e.onRequestUnbond,o=e.onUnbond,c=e.onClaimRewards,f=e.onRestake,l=t.userBonds.filter((function(e){return"Active"===e.status})).map((function(e){return e.currentAmount})).reduce((function(e,t){return e.add(t)}),_.o),i=Object(a.useState)({}),u=Object(s.a)(i,2),d=u[0],b=u[1];Object(a.useEffect)((function(){fetch(_.i).then((function(e){return e.json()})).then(b).catch(console.error)}),[]);var m=function(e){if(!e)return null;if(!d.USD)return null;var t=parseFloat(Oe(e),10)*d.USD;return"".concat(t.toFixed(2)," USD")},p="This table will show all your individual ADX deposits (bonds), along\n\t\twith information as status, amount and earned reward. By using the\n\t\taction buttons, you will be able to request unbonding and withdraw your\n\t\tADX after the ".concat(_.l," day lock-up period."),g=!t.loaded||t.userBonds.length?r.a.createElement(r.a.Fragment,null):r.a.createElement(pe.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(R.a,{square:!0,elevation:6,variant:"filled",severity:"info"},p)),h={fontWeight:"bold"};return r.a.createElement(pe.a,{container:!0,alignItems:"stretch",style:{padding:O.spacing(4),maxWidth:"1200px",margin:"auto"},spacing:2},r.a.createElement(pe.a,{item:!0,md:3,sm:6,xs:12},function(e){var t=e.rewardChannels,n=e.userBonds,a=e.onClaimRewards,o=e.onRestake,c="Your total unclaimed reward",f=null!=t;if(!f)return xe({loaded:f,title:c,extra:"0.00 USD",subtitle:"0.00 DAI"});var l,i=function(e){return e.map((function(e){return e.outstandingReward})).reduce((function(e,t){return e.add(t)}),_.o)},s=i(t.filter((function(e){return e.channelArgs.tokenAddr===_.a}))),u=i(t.filter((function(e){return e.channelArgs.tokenAddr!==_.a}))),d=s.gt(_.o)&&n.find((function(e){return"Unbonded"!==e.status}));return xe({loaded:!0,title:c,actions:r.a.createElement(ke.a,{display:"flex",flexDirection:"row",paddingTop:1},r.a.createElement(me.a,{size:"small",variant:"contained",color:"secondary",disabled:s.add(u).eq(_.o),onClick:function(){return a(t)}},"claim"),r.a.createElement(ke.a,{ml:1},r.a.createElement(me.a,{size:"small",variant:"contained",color:"secondary",disabled:!d,onClick:function(){return o(s)}},"re-stake"))),subtitle:u.gt(_.o)?"".concat(je(s)," ADX, ").concat((l=u,Object(te.formatUnits)(l.div("10000000000000000"),2))," DAI"):"".concat(je(s)," ADX")})}({rewardChannels:t.rewardChannels,userBonds:t.userBonds,onClaimRewards:c,onRestake:f})),r.a.createElement(pe.a,{item:!0,md:3,sm:6,xs:12},xe({loaded:t.loaded,title:"Total ADX staked",extra:!t.loaded||t.userBonds.length?m(t.totalStake):"Earning ".concat((100*Se(null,t.totalStake)).toFixed(2),"% APY"),subtitle:je(t.totalStake)+" ADX"})),r.a.createElement(pe.a,{item:!0,md:3,sm:6,xs:12},xe({loaded:t.loaded,title:"Your total active stake",extra:m(l),subtitle:je(l)+" ADX"})),r.a.createElement(pe.a,{item:!0,md:3,sm:6,xs:12},xe({loaded:t.loaded,title:"Your balance",subtitle:t.userBalance?je(t.userBalance)+" ADX":"",extra:m(t.userBalance)})),r.a.createElement(ge.a,{xs:12},r.a.createElement(he.a,{"aria-label":"Bonds table",style:{marginTop:O.spacing(2)}},r.a.createElement(we.a,null,r.a.createElement(de.a,null,r.a.createElement(be.a,{style:h},"Bond amount"),r.a.createElement(be.a,{style:h,align:"right"},"Pool"),r.a.createElement(be.a,{style:h,align:"right"},"Created"),r.a.createElement(be.a,{style:h,align:"right"},"Status"),r.a.createElement(be.a,{style:h,align:"right"},"Actions"))),r.a.createElement(ve.a,null,Object(ue.a)(t.userBonds||[]).filter((function(e){return"Unbonded"!==e.status})).reverse().map((function(e){var a,c=Be(e.poolId),f=c?c.label:e.poolId,l=new Date(1e3*(e.nonce.gt(_.o)?e.nonce:e.time).toNumber());return r.a.createElement(de.a,{key:De(e)},r.a.createElement(be.a,null,je(e.currentAmount)," ADX"),r.a.createElement(be.a,{align:"right"},f),r.a.createElement(be.a,{align:"right"},"".concat((a=l).getDate()," ").concat(a.toLocaleString("default",{month:"short"})," ").concat(a.getFullYear())),r.a.createElement(be.a,{align:"right"},function(e){if("UnbondRequested"===e.status){var n=e.willUnlock.getTime(),a=Date.now();if(n>a){var r=Math.ceil((n-a)/864e5);return"Can unbond in ".concat(r," days")}return"Can unbond"}return"Active"===e.status?"Active, earning ".concat((100*Se(e,t.totalStake)).toFixed(2),"% APY"):e.status}(e)),r.a.createElement(be.a,{align:"right"},"Active"===e.status?r.a.createElement(me.a,{color:"primary",onClick:function(){return n(e)}},"Request Unbond"):r.a.createElement(me.a,{disabled:"Unbonded"===e.status||!e.willUnlock||e.willUnlock.getTime()>Date.now(),onClick:function(){return o(e)},color:"secondary"},"Unbond")))}))))),g)}var Ie=n(878),Ue=n(862),Me=n(880),Ne=n(873),Pe=n(863),Re=n(874);function Xe(e){var t=e.maxAmount,n=e.onNewBond,o=e.totalStake,c=e.pools,l=e.isEarly,i=e.WalletType,u=Object(a.useState)(_.d),d=Object(s.a)(u,2),b=d[0],m=d[1],p=Object(a.useState)(0),g=Object(s.a)(p,2),h=g[0],w=g[1],v=Object(a.useState)(!1),y=Object(s.a)(v,2),A=y[0],E=y[1],x=Object(a.useState)(""),k=Object(s.a)(x,2),j=k[0],C=k[1],S=Object(a.useState)(!1),B=Object(s.a)(S,2),D=B[0],T=B[1],I=Object(a.useState)(""),U=Object(s.a)(I,2),M=U[0],N=U[1],P={minWidth:"180px"},R=Be(M),X=_.j?r.a.createElement(r.a.Fragment,null,"\xa0and"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:_.j},"staking conditions")):r.a.createElement(r.a.Fragment,null),Y=r.a.createElement(r.a.Fragment,null,"I understand I am locking up my ADX for at least ",_.l," days and I am familiar with the\xa0",r.a.createElement("a",{href:"https://www.adex.network/tos/",target:"_blank",rel:"noopener noreferrer"},"Terms and conditions"),X,"."),L=function(e){var n=e.amountBN,a=e.poolToValidate,r=a?Ce(a.minStakingAmount):_.o;return n.gt(t)?(E(!0),void C("Insufficient ADX amount!")):a&&n.lt(r)?(E(!0),void C("ADX amount less than minimum required for selected pool!")):void E(!1)},F=function(e){L({amountBN:e,poolToValidate:R}),w(Oe(e)),m(Object(f.a)({},b,{amount:e}))},W=r.a.createElement("span",{role:"img","aria-label":"farmer"},"\ud83c\udf3e");return r.a.createElement(ye.a,{elevation:2,style:{width:"500px",padding:O.spacing(2,4,3)}},r.a.createElement("h2",null,"Create a bond"),r.a.createElement(pe.a,{container:!0,spacing:2},r.a.createElement(pe.a,{item:!0,xs:6},r.a.createElement(Ie.a,{required:!0,label:"ADX amount",type:"number",style:P,value:h,error:A,onChange:function(e){var t=Math.max(0,e.target.value),n=Ce(t.toString(10));F(n),w(t.toString(10))},helperText:A?j:null}),r.a.createElement(Ee.a,{variant:"subtitle2"},"Max amount:",r.a.createElement(me.a,{onClick:function(){F(t)}},je(t)," ADX"))),r.a.createElement(pe.a,{item:!0,xs:6},r.a.createElement(Ue.a,{required:!0},r.a.createElement(Me.a,null,"Pool"),r.a.createElement(Ne.a,{style:P,value:M,onChange:function(e){return function(e){var t=Ce(h),n=Be(e);L({amountBN:t,poolToValidate:n}),N(e),m(Object(f.a)({},b,{poolId:e}))}(e.target.value)}},r.a.createElement(q.a,{value:""},r.a.createElement("em",null,"None")),c.map((function(e){var t=e.label,n=e.id;return r.a.createElement(q.a,{key:n,value:n},t)}))))),R?r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(Ee.a,{variant:"h6"},"Pool reward policy:"),r.a.createElement(Ee.a,{variant:"body1"},R.rewardPolicy)),r.a.createElement(pe.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(Ee.a,{variant:"h6"},"Pool slashing policy:"),r.a.createElement(Ee.a,{variant:"body1"},R.slashPolicy)),r.a.createElement(pe.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(Ee.a,{variant:"h6"},"Pool APY:"),r.a.createElement(Ee.a,{variant:"body1"},W," Current annual yield of"," ",(100*Se(null,o,l)).toFixed(2),"%"," ",W)),r.a.createElement(pe.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(Ee.a,{variant:"body1"},r.a.createElement("b",null,"Please sign ALL ".concat(i||"Metamask"," transactions that pop up"))))):"",r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(Pe.a,{style:{userSelect:"none"},label:Y,control:r.a.createElement(Re.a,{checked:D,onChange:function(e){return T(e.target.checked)}})})),r.a.createElement(pe.a,{item:!0,xs:12},r.a.createElement(Ue.a,{style:{display:"flex"}},r.a.createElement(me.a,{disabled:!(b.poolId&&D&&b.amount.gt(_.o)&&!A),color:"primary",variant:"contained",onClick:function(){T(!1),n(b)}},"Stake ADX")))))}var Ye=n(864),Le=n(865);function Fe(e){var t=e.isOpen,n=e.onDeny,a=e.onConfirm,o=e.content,c=e.title,f=void 0===c?"Are you sure?":c,l=e.confirmActionName;return r.a.createElement(z.a,{open:t,onClose:n},r.a.createElement(V.a,{id:"alert-dialog-title"},f),r.a.createElement(Ye.a,null,o),r.a.createElement(Le.a,null,r.a.createElement(me.a,{onClick:n,color:"primary"},"Cancel"),r.a.createElement(me.a,{onClick:a,variant:"contained",color:"primary"},l)))}var We="0x4470BB87d77b963A013DB939BE332f927f2b992e",qe=Object(ee.getDefaultProvider)(),ze=new ee.Contract(We,se,qe);function Ve(e,t,n){var o=Object(a.useState)(_.o),c=Object(s.a)(o,2),f=c[0],l=c[1],u=Object(a.useState)(!1),d=Object(s.a)(u,2),b=d[0],m=d[1];Object(a.useEffect)((function(){if(e){(function(){var t,n;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(e());case 2:if(t=a.sent){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,i.a.awrap(t.getAddress());case 7:return n=a.sent,a.t0=l,a.next=11,i.a.awrap(ze.balanceOf(n));case 11:a.t1=a.sent,(0,a.t0)(a.t1);case 13:case"end":return a.stop()}}))})().catch((function(e){return console.error(e)}))}}),[e]);var p=r.a.createElement("span",{role:"img","aria-label":"farmer"},"\ud83c\udf3e"),g=r.a.createElement("div",null,r.a.createElement("p",null,"The ADX token completed a"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.adex.network/blog/token-upgrade-defi-features/"},"successful upgrade")," ","to a new smart contract. You are currently holding"," ",r.a.createElement("b",null,f.gt(_.o)?Object(te.formatUnits)(f,4):""," legacy ADX"),"."),r.a.createElement("p",null,r.a.createElement("b",null,"Starting August 21st 2020, the legacy ADX will be deprecated and will no longer be traded on exchanges or used for staking.")),r.a.createElement("p",null,"We recommend that you swap your legacy ADX right now by clicking the"," ",r.a.createElement("i",null,r.a.createElement("b",null,"Swap now"))," ","button and signing the ".concat(n||"MetaMask"," transactions.")),r.a.createElement("p",null,r.a.createElement("b",null,p," After this, you can stake your ADX to earn up to 150% APY (annual percentage yield) with no slashing risk (",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.adex.network/blog/new-token-economics-and-staking/"},"read more"),"). ",p))),h=t(Ge.bind(null,l,f,e)),w=Fe({isOpen:f.gt(_.o),onDeny:function(){return l(_.o)},onConfirm:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(h());case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:return m(!0),t.next=8,i.a.awrap(Promise.all(e.map((function(e){return e.wait()}))));case 8:m(!1);case 9:case"end":return t.stop()}}))},confirmActionName:"Swap now",title:"ADX Token upgrade",content:g});return r.a.createElement(r.a.Fragment,null,w,r.a.createElement(P.a,{open:b},r.a.createElement(R.a,{elevation:6,variant:"filled",severity:"success"},"Token swap is in progress! It will be completed once all your pending transactions have been confirmed.")))}function Ge(e,t,n){var a,r,o,c,f,l,s,u;return i.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return e(_.o),d.next=3,i.a.awrap(n());case 3:return a=d.sent,d.next=6,i.a.awrap(a.getAddress());case 6:return r=d.sent,o=new ee.Contract(We,se,a),c=new ee.Contract(_.a,["function swap(uint prevTokenAmount) external"],a),d.next=11,i.a.awrap(o.allowance(r,_.a));case 11:if(f=d.sent,l=[],s=!1,u=function(e){return s?{gasLimit:e}:(s=!0,{})},!f.lt(t)){d.next=27;break}if(!f.gt(_.o)){d.next=22;break}return d.t0=l,d.next=20,i.a.awrap(o.approve(_.a,_.o,u(6e4)));case 20:d.t1=d.sent,d.t0.push.call(d.t0,d.t1);case 22:return d.t2=l,d.next=25,i.a.awrap(o.approve(_.a,t,u(6e4)));case 25:d.t3=d.sent,d.t2.push.call(d.t2,d.t3);case 27:return d.t4=l,d.next=30,i.a.awrap(c.swap(t,u(1e5)));case 30:return d.t5=d.sent,d.t4.push.call(d.t4,d.t5),d.abrupt("return",l);case 33:case"end":return d.stop()}}))}var He,Ke=n(369),Ze=n(371),Je=n(131),_e=n(171),Qe="https://mainnet.infura.io/v3/ca77f7a6c66c4ced859f74644e3ea9a4",$e=new Je.a({supportedChainIds:[1,3,4,5,42]}),et=new Ke.a({chainId:1,url:Qe,pollingInterval:13e3}),tt=new Ze.a({chainId:1,url:Qe,pollingInterval:13e3,manifestEmail:"contactus@adex.network",manifestAppUrl:"https://adex.network"}),nt=new _e.b({rpc:{1:Qe},bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:13e3}),at=n(95),rt=n(111);var ot="0x333420fc6a897356e69b62417cd17ff012177d2b",ct=Object(ee.getDefaultProvider)(),ft=new ee.Contract(_.c,ce,ct),lt=new ee.Contract(_.a,se,ct),it=new ee.Contract(ot,le,ct),st=Object(te.bigNumberify)("1000000000000000000"),ut=Object(te.bigNumberify)("200000000000000000"),dt={loaded:!1,userBonds:[],userBalance:_.o,totalStake:_.o};function bt(e){return r.a.createElement(R.a,Object.assign({elevation:6,variant:"filled"},e))}var mt=null,pt=null,gt=(He={},Object(u.a)(He,_.g,$e),Object(u.a)(He,_.m,nt),Object(u.a)(He,_.k,tt),Object(u.a)(He,_.e,et),He);function ht(){var e=Object(rt.c)(),t=e.library,n=e.activate,o=e.error,c=e.deactivate,l=e.active,u=Object(a.useState)(!1),b=Object(s.a)(u,2),m=b[0],p=b[1],g=Object(a.useState)(null),h=Object(s.a)(g,2),w=h[0],v=h[1],y=Object(a.useState)(null),A=Object(s.a)(y,2),E=A[0],x=A[1],k=Object(a.useState)(!1),T=Object(s.a)(k,2),U=T[0],R=T[1],L=Object(a.useState)(!1),Q=Object(s.a)(L,2),ee=Q[0],te=Q[1],ne=Object(a.useState)("Error! Unspecified error occured."),ae=Object(s.a)(ne,2),re=ae[0],oe=ae[1],ce=Object(a.useState)(dt),fe=Object(s.a)(ce,2),le=fe[0],ie=fe[1],se=Object(a.useState)(null),ue=Object(s.a)(se,2),de=ue[0],be=ue[1],me=Object(a.useState)(null),pe=Object(s.a)(me,2),ge=pe[0],he=pe[1];!function(e){var t=Object(rt.c)(),n=t.active,r=t.error,o=t.activate;Object(a.useEffect)((function(){var t=window.ethereum;if(t&&t.on&&!n&&!r&&!e){var a=function(){console.log("Handling 'connect' event"),o($e)},c=function(e){console.log("Handling 'chainChanged' event with payload",e),o($e)},f=function(e){console.log("Handling 'accountsChanged' event with payload",e),e.length>0&&o($e)},l=function(e){console.log("Handling 'networkChanged' event with payload",e),o($e)};return t.on("connect",a),t.on("chainChanged",c),t.on("accountsChanged",f),t.on("networkChanged",l),function(){t.removeListener&&(t.removeListener("connect",a),t.removeListener("chainChanged",c),t.removeListener("accountsChanged",f),t.removeListener("networkChanged",l))}}}),[n,r,e,o])}(!!de);var we=function(){return function(e){var t,n,a,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.a.awrap(Promise.all([lt.balanceOf(_.c),vt(e)]));case 2:return t=o.sent,n=Object(s.a)(t,2),a=n[0],r=n[1],o.abrupt("return",Object(f.a)({totalStake:a},r));case 7:case"end":return o.stop()}}))}(ge).then(ie).catch((function(e){console.error("loadStats",e),R(!0),4001===e.code&&oe("Error! User denied authorization!")}))};Object(a.useEffect)((function(){we();var e=setInterval(we,2e4);return function(){return clearInterval(e)}}),[ge]),Object(a.useEffect)((function(){o&&(R(!0),oe(function(e){return e instanceof Je.b?"No Ethereum browser extension detected, install MetaMask on desktop or visit from a dApp browser on mobile.":e instanceof rt.a?"You're connected to an unsupported network.":e instanceof Je.c||e instanceof _e.a?"Please authorize this website to access your Ethereum account.":(console.error(e),"An unknown error occurred. Check the console for more details.")}(o)),c())}),[o]),Object(a.useEffect)((function(){he(mt)}),[l]);var ve=function(e){return function(){var t,n,a,r,o=arguments;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:for(c.prev=0,te(!0),R(!1),t=o.length,n=new Array(t),a=0;a<t;a++)n[a]=o[a];return c.next=6,i.a.awrap(e.apply(null,n));case 6:return r=c.sent,te(!1),c.abrupt("return",r);case 11:c.prev=11,c.t0=c.catch(0),console.error(c.t0),te(!1),R(!0),oe(c.t0.message||"Unknown error");case 17:case"end":return c.stop()}}),null,null,[[0,11]])}},ye=ve(xt.bind(null,!1)),Ae=ve(xt.bind(null,!0)),Ee=ve(kt),xe=ve(Ot.bind(null,le)),ke=function(e,t){"clickaway"!==t&&R(!1)};return r.a.createElement(d.a,{theme:O},r.a.createElement(j.a,{position:"static"},r.a.createElement(C.a,null,r.a.createElement("img",{height:"40vh",src:$.a,alt:"logo"}),ge&&r.a.createElement(D.a,{disabled:!le.loaded,onClick:function(){return p(!0)},variant:"extended",color:"secondary",style:{position:"absolute",right:"5%",top:"50%"}},r.a.createElement(I.a,{style:{margin:O.spacing(1)}}),"Stake your ADX"),!ge&&r.a.createElement(D.a,{onClick:function(){return be(!0)},variant:"extended",color:"secondary",style:{position:"absolute",right:"5%",top:"50%"}},r.a.createElement(M.a,{style:{margin:O.spacing(1)}}),"Connect Wallet"),function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1],c=function(){o(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{style:{position:"absolute",right:"1.25%",top:"10%"},onClick:function(e){o(e.currentTarget)}},r.a.createElement(F.a,{style:{fontSize:"1.5em",color:"white"}})),r.a.createElement(Y.a,{id:"simple-menu",anchorEl:n,open:Boolean(n),keepMounted:!0,onClose:c,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(W.a,{href:"https://www.adex.network/tos",target:"_blank"},r.a.createElement(q.a,{onClick:c},"Terms of Service")),r.a.createElement(W.a,{href:"https://help.adex.network/hc/en-us/categories/360002707720-Staking",target:"_blank"},r.a.createElement(q.a,{onClick:c},"User Guide")),r.a.createElement(W.a,{href:"https://github.com/adexnetwork/adex-protocol-eth",target:"_blank"},r.a.createElement(q.a,{onClick:c},"Source Code")),r.a.createElement(W.a,{href:"https://github.com/adexnetwork/adex-protocol-eth#audits",target:"_blank"},r.a.createElement(q.a,{onClick:c},"Audits")),r.a.createElement(W.a,{href:"https://coinmarketcap.com/currencies/adx-net/markets/",target:"_blank"},r.a.createElement(q.a,{onClick:c},"Where to buy ADX"))))}())),Te({stats:le,onRequestUnbond:v,onUnbond:Ae,onClaimRewards:Ee,onRestake:x}),Ve(le.loaded?wt:null,ve,mt),Fe({isOpen:!!w,onDeny:function(){return v(null)},onConfirm:function(){w&&ye(w),v(null)},confirmActionName:"Unbond",content:r.a.createElement(r.a.Fragment,null,"Are you sure you want to request unbonding of"," ",je(w?w.currentAmount:_.o)," ADX?",r.a.createElement("br",null),r.a.createElement("br",null),"Please be aware:",r.a.createElement("ol",null,r.a.createElement("li",null,"It will take ",_.l," days before you will be able to withdraw your ADX!"),r.a.createElement("li",null,"You will not receive staking rewards for this amount in this"," ",_.l," day period.")))}),Fe({isOpen:!!E,onDeny:function(){return x(null)},onConfirm:function(){E&&xe(),x(null)},confirmActionName:"Re-stake",content:r.a.createElement(r.a.Fragment,null,"Are you sure you want to stake your earnings of"," ",je(E||_.o)," ADX?",r.a.createElement("br",null),r.a.createElement("br",null),"Please be aware that this means that this amount will be locked up for at least ",_.l," days.",r.a.createElement("br",null),le.userBonds.find((function(e){return"Active"===e.status}))?"":"Your bond will be re-activated, meaning that your request to unbond will be cancelled but it will start earning rewards again.")}),function(e){var t=e.title,n=void 0===t?"Select Wallet":t,a=e.handleListItemClick,o=e.handleClose,c=e.open,f=e.disableNonBrowserWallets;return r.a.createElement(z.a,{onClose:o,"aria-labelledby":"simple-dialog-title",open:c},r.a.createElement(V.a,{id:"simple-dialog-title"},n),r.a.createElement(G.a,null,_.n.map((function(e){var t=e.icon,n=e.name,o=e.title;return r.a.createElement(H.a,{disabled:f&&n!==_.g,button:!0,onClick:function(){return a(n)},key:n},r.a.createElement(K.a,null,r.a.createElement(Z.a,{src:t})),r.a.createElement(J.a,{primary:o}))}))))}({open:!!de,content:"",handleClose:function(){be(null)},handleListItemClick:function(e){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log({text:e}),n(gt[e]),a.next=4,i.a.awrap(wt(e,t));case 4:be(null);case 5:case"end":return a.stop()}}))},disableNonBrowserWallets:!1}),r.a.createElement(P.a,{open:ee},r.a.createElement(bt,{severity:"info"},"Please sign all pending MetaMask actions!")),r.a.createElement(P.a,{open:U,autoHideDuration:1e4,onClose:ke},r.a.createElement(bt,{onClose:ke,severity:"error"},re)),r.a.createElement(S.a,{open:m,onClose:function(){return p(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center"},closeAfterTransition:!0,BackdropComponent:B.a,BackdropProps:{timeout:300}},r.a.createElement(N.a,{in:m},Xe({pools:_.h.filter((function(e){return e.selectable})),totalStake:le.totalStake,maxAmount:le.userBalance,onNewBond:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!1),t.next=3,i.a.awrap(ve(Et.bind(null,le,e))());case 3:case"end":return t.stop()}}))},WalletType:mt,isEarly:le.userBonds.find((function(e){return e.nonce.toNumber()<1597276800}))}))))}function wt(e,t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log({library:t}),mt=e||mt,console.log({WalletType:mt}),mt){n.next=5;break}return n.abrupt("return",null);case 5:return console.log({Signer:pt}),t&&(pt=t.getSigner()),n.abrupt("return",pt);case 8:case"end":return n.stop()}}))}function vt(e){var t,n,a,r,o,c;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e){l.next=2;break}return l.abrupt("return",{loaded:!0,userBonds:[],userBalance:_.o,rewardChannels:[]});case 2:return l.next=4,i.a.awrap(wt());case 4:if(t=l.sent){l.next=7;break}return l.abrupt("return",{loaded:!0,userBonds:[],userBalance:_.o,rewardChannels:[]});case 7:return l.next=9,i.a.awrap(t.getAddress());case 9:return n=l.sent,l.next=12,i.a.awrap(Promise.all([yt(n),At(n)]));case 12:return a=l.sent,r=Object(s.a)(a,2),o=r[0],c=r[1],l.abrupt("return",Object(f.a)({},o,{loaded:!0,rewardChannels:c}));case 17:case"end":return l.stop()}}))}function yt(e){var t,n,a,r,o,c,l,u,d;return i.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:return t=Object(at.a)(e).addr,b.next=3,i.a.awrap(Promise.all([Promise.all([lt.balanceOf(e),lt.balanceOf(t)]),ct.getLogs({fromBlock:0,address:_.c,topics:[null,Object(te.hexZeroPad)(t,32)]}),ct.getLogs(Object(f.a)({fromBlock:0},ft.filters.LogSlash(null,null)))]));case 3:return n=b.sent,a=Object(s.a)(n,3),r=a[0],o=a[1],c=a[2],l=r.reduce((function(e,t){return e.add(t)})),u=c.reduce((function(e,t){var n=ft.interface.parseLog(t).values,a=n.poolId,r=n.newSlashPts;return e[a]=r,e}),{}),d=o.reduce((function(e,t){var n=t.topics[0],a=ft.interface.events;if(n===a.LogBond.topic){var r=ft.interface.parseLog(t).values,o=r.owner,c=r.amount,l=r.poolId,i=r.nonce,s=r.slashedAtStart,d={owner:o,amount:c,poolId:l,nonce:i,slashedAtStart:s,time:r.time};e.push(Object(f.a)({id:De(d),status:"Active",currentAmount:d.amount.mul(st.sub(u[l]||_.o)).div(st.sub(s))},d))}else if(n===a.LogUnbondRequested.topic){var b=ft.interface.parseLog(t).values,m=b.bondId,p=b.willUnlock,g=e.find((function(e){return e.id===m}));g.status="UnbondRequested",g.willUnlock=new Date(1e3*p)}else if(n===a.LogUnbonded.topic){var h=ft.interface.parseLog(t).values.bondId;e.find((function(e){return e.id===h})).status="Unbonded"}return e}),[]),b.abrupt("return",{userBonds:d,userBalance:l});case 12:case"end":return b.stop()}}))}function At(e){var t,n,a,r,o,c;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=Object(at.a)(e).addr,n=_.h[0],l.next=4,i.a.awrap(fetch("".concat(n.url,"/fee-rewards")));case 4:return a=l.sent,l.next=7,i.a.awrap(a.json());case 7:return r=l.sent,o=Math.floor(Date.now()/1e3),l.next=11,i.a.awrap(Promise.all(r.map((function(n){var a,r,c;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(!(n.channelArgs.validUntil<o)){l.next=2;break}return l.abrupt("return",null);case 2:if(a=n.balances[e]?e:t,n.balances[a]){l.next=5;break}return l.abrupt("return",null);case 5:return r=new re.a(n.balances),l.t0=Object(te.bigNumberify)(n.balances[a]),l.next=9,i.a.awrap(it.withdrawnPerUser(n.channelId,a));case 9:if(l.t1=l.sent,!(c=l.t0.sub.call(l.t0,l.t1)).lt(ut)){l.next=13;break}return l.abrupt("return",null);case 13:return l.abrupt("return",Object(f.a)({},n,{outstandingReward:c,claimFrom:a,proof:r.getProof(a),stateRoot:r.mTree.getRoot(),amount:n.balances[a]}));case 14:case"end":return l.stop()}}))}))));case 11:return c=l.sent,l.abrupt("return",c.filter((function(e){return e})));case 13:case"end":return l.stop()}}))}function Et(e,t){var n,a,r,o,c,f,l,u,d,b,m,p,g,h,w,v,y,A,E;return i.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:if(n=t.amount,a=t.poolId,r=t.nonce,a){x.next=3;break}return x.abrupt("return");case 3:if(e.userBalance){x.next=5;break}return x.abrupt("return");case 5:if(!n.gt(e.userBalance)){x.next=7;break}throw new Error("amount too large");case 7:return x.next=9,i.a.awrap(wt());case 9:if(o=x.sent){x.next=12;break}throw new Error("failed to get signer");case 12:return x.next=14,i.a.awrap(o.getAddress());case 14:return c=x.sent,f=Object(at.a)(c),l=f.addr,u=[n,a,r||Object(te.bigNumberify)(Math.floor(Date.now()/1e3))],x.next=19,i.a.awrap(Promise.all([lt.allowance(c,l),lt.allowance(l,ft.address),lt.balanceOf(l)]));case 19:if(d=x.sent,b=Object(s.a)(d,3),m=b[0],p=b[1],g=b[2],h=n.sub(g),!(w=h.gt(_.o)&&!m.gte(n))){x.next=30;break}return v=new ee.Contract(_.a,se,o),x.next=30,i.a.awrap(v.approve(l,_.f));case 30:return y=[],h.gt(_.o)&&y.push([lt.address,lt.interface.functions.transferFrom.encode([c,l,n])]),p.lt(n)&&y.push([lt.address,lt.interface.functions.approve.encode([ft.address,_.f])]),A=e.userBonds.find((function(e){return"Active"===e.status&&e.poolId===a})),E=A?ft.interface.functions.replaceBond.encode([A,[A.amount.add(n),a,A.nonce]]):ft.interface.functions.addBond.encode([u]),y.push([ft.address,E]),x.next=38,i.a.awrap(Ct(y,w?{gasLimit:45e4}:{}));case 38:case"end":return x.stop()}}))}function xt(e,t){var n,a,r,o,c,f;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=t.amount,a=t.poolId,r=t.nonce,o=[n,a,r||_.o],!e){l.next=15;break}return l.next=5,i.a.awrap(wt());case 5:if(c=l.sent){l.next=8;break}throw new Error("failed to get signer");case 8:return l.next=10,i.a.awrap(c.getAddress());case 10:return f=l.sent,l.next=13,i.a.awrap(Ct([[ft.address,ft.interface.functions.unbond.encode([o])],[lt.address,lt.interface.functions.transfer.encode([f,n])]]));case 13:l.next=17;break;case 15:return l.next=17,i.a.awrap(Ct([[ft.address,ft.interface.functions.requestUnbond.encode([o])]]));case 17:case"end":return l.stop()}}))}function kt(e){var t,n,a,r,o,c,f,l,u,d,b,m,p,g;return i.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,i.a.awrap(wt());case 2:if(t=h.sent){h.next=5;break}throw new Error("failed to get signer");case 5:return h.next=7,i.a.awrap(t.getAddress());case 7:n=h.sent,a=new ee.Contract(ot,le,t),r=e.filter((function(e){return e.claimFrom===n})),o=!0,c=!1,f=void 0,h.prev=13,l=r[Symbol.iterator]();case 15:if(o=(u=l.next()).done){h.next=23;break}return d=u.value,b=jt(d.channelArgs),h.next=20,i.a.awrap(a.channelWithdraw(b,d.stateRoot,d.signatures,d.proof,d.amount));case 20:o=!0,h.next=15;break;case 23:h.next=29;break;case 25:h.prev=25,h.t0=h.catch(13),c=!0,f=h.t0;case 29:h.prev=29,h.prev=30,o||null==l.return||l.return();case 32:if(h.prev=32,!c){h.next=35;break}throw f;case 35:return h.finish(32);case 36:return h.finish(29);case 37:if(m=e.filter((function(e){return e.claimFrom!==n})),p={},m.forEach((function(e){var t=e.channelArgs.tokenAddr,n=p[t]||_.o;p[t]=n.add(e.outstandingReward)})),!(g=m.map((function(e){var t=jt(e.channelArgs);return[it.address,it.interface.functions.channelWithdraw.encode([t,e.stateRoot,e.signatures,e.proof,e.amount])]})).concat(Object.entries(p).map((function(e){var t=Object(s.a)(e,2),a=t[0],r=t[1];return[a,lt.interface.functions.transfer.encode([n,r])]})))).length){h.next=44;break}return h.next=44,i.a.awrap(Ct(g));case 44:case"end":return h.stop()}}),null,null,[[13,25,29,37],[30,,32,36]])}function Ot(e){var t,n,a,r,o,c,f,l,s,u,d;return i.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(t=e.rewardChannels,n=e.userBonds,(a=t.filter((function(e){return e.channelArgs.tokenAddr===_.a}))).length){b.next=4;break}throw new Error("no channels to earn from");case 4:if(r=a.map((function(e){return e.outstandingReward})).reduce((function(e,t){return e.add(t)})),o=n.find((function(e){return"Active"===e.status}))||n.find((function(e){return"UnbondRequested"===e.status}))){b.next=8;break}throw new Error("You have no active bonds");case 8:return c=o.amount,f=o.poolId,l=o.nonce,s=[c,f,l],u=[c.add(r),f,l],d=a.map((function(e){var t=jt(e.channelArgs);return[it.address,it.interface.functions.channelWithdraw.encode([t,e.stateRoot,e.signatures,e.proof,e.amount])]})).concat([[lt.address,lt.interface.functions.approve.encode([ft.address,u[0]])],[ft.address,ft.interface.functions.replaceBond.encode([s,u])]]),b.next=14,i.a.awrap(Ct(d));case 14:case"end":return b.stop()}}))}function jt(e){return[e.creator,e.tokenAddr,e.tokenAmount,e.validUntil,e.validators,e.spec]}function Ct(e){var t,n,a,r,o,c,f,l,u,d,b,m,p,g,h,w=arguments;return i.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:return t=w.length>1&&void 0!==w[1]?w[1]:{},v.next=3,i.a.awrap(wt());case 3:if(n=v.sent){v.next=6;break}throw new Error("failed to get signer");case 6:return v.next=8,i.a.awrap(n.getAddress());case 8:return a=v.sent,r=Object(at.a)(a),o=r.addr,c=r.bytecode,f=new ee.Contract(o,fe,n),v.next=13,i.a.awrap(ct.getCode(f.address));case 13:if(v.t0=v.sent,!(l="0x"===v.t0)){v.next=19;break}v.t1=_.o,v.next=22;break;case 19:return v.next=21,i.a.awrap(f.nonce());case 21:v.t1=v.sent;case 22:if(u=v.t1,d=function(e){return function(t,n){var a=Object(s.a)(t,2),r=a[0],o=a[1];return Object(at.b)(f.address,u.add(n+e),r,o).toSolidityTuple()}},l){v.next=30;break}return b=e.map(d(0)),v.next=28,i.a.awrap(f.executeBySender(b,t));case 28:v.next=38;break;case 30:return m=new ee.Contract(_.b,ie,n),p=e.map(d(1)),g=Object(at.b)(f.address,u,f.address,f.interface.functions.executeBySender.encode([p])),v.next=35,i.a.awrap(n.signMessage(g.hash()));case 35:return h=v.sent,v.next=38,i.a.awrap(m.deployAndExecute(c,0,[g.toSolidityTuple()],[Object(oe.splitSig)(h)],t));case 38:case"end":return v.stop()}}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){return r.a.createElement(rt.b,{getLibrary:function(e){return new ne.Web3Provider(e)}},r.a.createElement(ht,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},95:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return l}));var a=n(226),r=n(21),o=n(167),c=n(7);function f(t){var n=function(e){var t=e.slice(2).toLowerCase();return"0x608060405234801561001057600080fd5b5060026000803073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff160217905550600260008073".concat(t,"73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff1602179055506000734470bb87d77b963a013db939be332f927f2b992e9050600073ade00c28244d5ce17d72e40330b1c318cd12b7c3905060008273ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016101429190610501565b60206040518083038186803b15801561015a57600080fd5b505afa15801561016e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610192919061045a565b90506000811115610276578273ffffffffffffffffffffffffffffffffffffffff1663095ea7b383836040518363ffffffff1660e01b81526004016101d892919061051c565b600060405180830381600087803b1580156101f257600080fd5b505af1158015610206573d6000803e3d6000fd5b505050508173ffffffffffffffffffffffffffffffffffffffff166394b918de826040518263ffffffff1660e01b81526004016102439190610560565b600060405180830381600087803b15801561025d57600080fd5b505af1158015610271573d6000803e3d6000fd5b505050505b60008273ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016102b19190610501565b60206040518083038186803b1580156102c957600080fd5b505afa1580156102dd573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610301919061045a565b9050600081111561043c576000734846c6837ec670bbd1f5b485471c8f64ecb9c53490508373ffffffffffffffffffffffffffffffffffffffff1663095ea7b382846040518363ffffffff1660e01b815260040161036092919061051c565b600060405180830381600087803b15801561037a57600080fd5b505af115801561038e573d6000803e3d6000fd5b505050508073ffffffffffffffffffffffffffffffffffffffff1663b4dca72460405180606001604052808581526020017f2ce0c96383fb229d9776f33846e983a956a7d95844fac57b180ed0071d93bb2860001b8152602001428152506040518263ffffffff1660e01b81526004016104089190610545565b600060405180830381600087803b15801561042257600080fd5b505af1158015610436573d6000803e3d6000fd5b50505050505b505050506105d8565b600081519050610454816105c1565b92915050565b60006020828403121561046c57600080fd5b600061047a84828501610445565b91505092915050565b61048c8161057b565b82525050565b61049b8161058d565b82525050565b6060820160008201516104b760008501826104e3565b5060208201516104ca6020850182610492565b5060408201516104dd60408501826104e3565b50505050565b6104ec816105b7565b82525050565b6104fb816105b7565b82525050565b60006020820190506105166000830184610483565b92915050565b60006040820190506105316000830185610483565b61053e60208301846104f2565b9392505050565b600060608201905061055a60008301846104a1565b92915050565b600060208201905061057560008301846104f2565b92915050565b600061058682610597565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6105ca816105b7565b81146105d557600080fd5b50565b6101b7806105e76000396000f3fe608060405234801561001057600080fd5b506004361061002f5760003560e01c8063c066a5b11461007357610030565b5b60007396e3cb4b4632ed45363ff2c9f0fbec9b583d9d3a90503660008037600080366000846127105a03f43d6000803e806000811461006e573d6000f35b3d6000fd5b61008d600480360381019061008891906100d8565b6100a3565b60405161009a9190610110565b60405180910390f35b60006020528060005260406000206000915054906101000a900460ff1681565b6000813590506100d28161016a565b92915050565b6000602082840312156100ea57600080fd5b60006100f8848285016100c3565b91505092915050565b61010a8161015d565b82525050565b60006020820190506101256000830184610101565b92915050565b60006101368261013d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600060ff82169050919050565b6101738161012b565b811461017e57600080fd5b5056fea26469706673582212200e40aa3025d54e828fb973089b64ce06688fedcd71b98ae68521a0217652c59564736f6c634300060c0033")}(t);return{bytecode:n,addr:Object(r.getAddress)("0x".concat(Object(a.generateAddress2)(c.b,e.alloc(32),n).toString("hex")))}}function l(e,t,n,a){return new o.Transaction({identityContract:e,nonce:t.toString(10),feeTokenAddr:"0x6b175474e89094c44da98b954eedeac495271d0f",feeAmount:0,to:n,data:a})}}).call(this,n(5).Buffer)}},[[405,1,2]]]);
//# sourceMappingURL=main.05c24bb5.chunk.js.map